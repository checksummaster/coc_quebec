<!DOCTYPE html>
<html>
<head>
    <title>Clash of Clan - Quebec Clan - Investisement de la Capital</title>
    <style>
        /* Define alternating row colors */
        table {
            border-collapse: collapse;
            width: 100%;
        }
        th, td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2; /* Light gray for even rows */
        }
    </style>
</head>
<body>
    <h1>Clash of Clan - Quebec Clan - Investisement de la Capital</h1>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Value</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody id="data-body">
        </tbody>
    </table>

    <script>
        // Function to fetch and sort JSON data from the "log.json" file by date
        async function fetchAndSortJSONData() {
            try {
                const response = await fetch('log.json');
                const jsonData = await response.json();
                
                // Sort the data by date in descending order
                jsonData.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                return jsonData;
            } catch (error) {
                console.error('Error fetching JSON data:', error);
                return [];
            }
        }

        // Function to display JSON data in the table with dates in local time
        async function displayData() {
            const dataBody = document.getElementById('data-body');
            const jsonData = await fetchAndSortJSONData();
            
            // Iterate through each item in the sorted JSON array
            jsonData.forEach(item => {
                // Create a new row
                const row = document.createElement('tr');

                // Format the date in local time
                const localDate = new Date(item.date).toLocaleString();

                // Populate the row with data
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.value}$</td>
                    <td>${localDate}</td>
                `;

                // Append the row to the table body
                dataBody.appendChild(row);
            });
        }

        // Call the displayData function to show the sorted JSON data in the table
        displayData();
    </script>
</body>
</html>
